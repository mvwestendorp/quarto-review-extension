/**
 * CriticMarkup: ProseMirror/Milkdown Specific
 *
 * CriticMarkup styling within Milkdown editor and ProseMirror renderer.
 */

/* CriticMarkup in Milkdown editor - ProseMirror specific */
.milkdown .ProseMirror ins.critic-addition,
.milkdown .ProseMirror .critic-addition,
.review-editor-body ins.critic-addition,
.review-editor-body .critic-addition {
  background-color: rgba(var(--review-color-success-rgb), 0.2) !important;
  border-bottom: 2px solid var(--review-color-success) !important;
  text-decoration: none !important;
  padding: 2px 4px;
  border-radius: 3px;
  color: inherit !important;
}

.milkdown .ProseMirror del.critic-deletion,
.milkdown .ProseMirror .critic-deletion,
.review-editor-body del.critic-deletion,
.review-editor-body .critic-deletion {
  background-color: rgba(var(--review-color-danger-rgb), 0.2) !important;
  text-decoration: line-through !important;
  color: var(--review-color-danger) !important;
  padding: 2px 4px;
  border-radius: 3px;
}

.milkdown .ProseMirror mark.critic-highlight,
.milkdown .ProseMirror .critic-highlight,
.review-editor-body mark.critic-highlight,
.review-editor-body .critic-highlight {
  background-color: rgba(var(--review-color-warning-rgb), 0.4) !important;
  padding: 2px 4px;
  border-radius: 3px;
  border-bottom: 2px solid var(--review-color-warning) !important;
  color: inherit !important;
}

.milkdown .ProseMirror .critic-comment,
.review-editor-body .critic-comment {
  display: inline-block;
  border: 1px solid var(--review-color-primary) !important;
  background-color: rgba(3, 102, 214, 0.1) !important;
  padding: 4px 8px;
  border-radius: 4px;
  font-style: italic;
  color: var(--review-color-primary-darker) !important;
  font-size: 0.9em;
  width: auto !important;
  height: auto !important;
  margin: 0 4px !important;
}

/* Enhanced CriticMarkup Styles for Semantic HTML */

/* Additions - green background with underline */
.milkdown ins.critic-addition,
.milkdown .critic-addition,
ins.critic-addition,
.critic-addition {
  background-color: rgba(var(--review-color-success-rgb), 0.2);
  border-bottom: 2px solid var(--review-color-success);
  text-decoration: none;
  padding: 2px 4px;
  border-radius: 3px;
  color: inherit;
  font-style: normal;
}

/* Deletions - red background with strikethrough */
.milkdown del.critic-deletion,
.milkdown .critic-deletion,
del.critic-deletion,
.critic-deletion {
  background-color: rgba(var(--review-color-danger-rgb), 0.2);
  text-decoration: line-through;
  color: var(--review-color-danger);
  padding: 2px 4px;
  border-radius: 3px;
}

/* Highlights - yellow background */
.milkdown mark.critic-highlight,
.milkdown .critic-highlight,
mark.critic-highlight,
.critic-highlight {
  background-color: rgba(var(--review-color-warning-rgb), 0.4);
  padding: 2px 4px;
  border-radius: 3px;
  border-bottom: 2px solid var(--review-color-warning);
  color: inherit;
}

/* Comments - blue box with distinct styling */
.milkdown .critic-comment,
.review-editor-body .critic-comment {
  color: var(--review-color-primary-darker) !important;
  width: auto !important;
  height: auto !important;
}

.milkdown .critic-comment::after,
.review-editor-body .critic-comment::after {
  content: none;
}

/* Substitutions - combination of deletion and addition */
.milkdown .critic-substitution,
.critic-substitution {
  display: inline-block;
}

.milkdown .critic-substitution del,
.critic-substitution del {
  background-color: rgba(var(--review-color-danger-rgb), 0.2);
  text-decoration: line-through;
  color: var(--review-color-danger);
  margin-right: 4px;
  padding: 2px 4px;
  border-radius: 3px;
}

.milkdown .critic-substitution ins,
.critic-substitution ins {
  background-color: rgba(var(--review-color-success-rgb), 0.2);
  border-bottom: 2px solid var(--review-color-success);
  text-decoration: none;
  padding: 2px 4px;
  border-radius: 3px;
  color: inherit;
}

/* Make sure semantic HTML elements don't have default styling */
.milkdown ins,
.milkdown del,
.milkdown mark {
  font-weight: inherit;
}

/* Enhanced styling for editor body */
.review-editor-body .milkdown ins.critic-addition {
  transition: background-color 0.2s ease;
}

.review-editor-body .milkdown ins.critic-addition:hover {
  background-color: rgba(46, 160, 67, 0.3);
}

.review-editor-body .milkdown del.critic-deletion {
  transition: background-color 0.2s ease;
}

.review-editor-body .milkdown del.critic-deletion:hover {
  background-color: rgba(248, 81, 73, 0.3);
}

.review-editor-body .milkdown mark.critic-highlight {
  transition: background-color 0.2s ease;
}

.review-editor-body .milkdown mark.critic-highlight:hover {
  background-color: rgba(255, 235, 59, 0.5);
}
